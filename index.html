<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <title>Document</title>



</head>
<body background="memphis-colorful.png"></body>

<h1> My Favorite Things!</h1>
<p> Click a button to see giphs of my favorite things!</p>

<div id="person"></div> 
<div id="giphs"></div>

    <script>
var topics= ["Taylor Swift", "cats", "Tom Brady", "Parks and Recreation", "Stranger Things", "Meghan Markle", "Princess Bride", "Star Wars", "Milwaukee Brewers", "Milwaukee Bucks"]
        
        //create an array to topics variable
    var buttonDiv=$("#person");
    var newButtonDiv=$("<button>" + topics.join("<button> ") + "</button>");
    buttonDiv.html(newButtonDiv)
    //get information from buttons
    //ajax info
    $("#person").on("click", function() {
    var person=event.target.textContent
    console.log(person)
    var queryURL= "http://api.giphy.com/v1/gifs/search?q=" + person + "&api_key=dJZAoTE5oJZcb8BOEXkAExAi85YngNzf&limit=10"
    //get giphy api link
    //add in person
    $.ajax({
        url: queryURL,
        method: "GET"
      })
        //turn topics into buttons
    .then(function(response) {
        var results = response.data;
        console.log(results)
        for (var i = 0; i < results.length; i++) {

            if (results[i].rating !== "r" && results[i].rating !== "pg-13") {
            
            var div=$("<div>");

                var rating = results[i].rating;
                var p = $("<p>").text("Rating: " + rating);

            
            var stillState=results[i].images.fixed_height_still.url
            var animateState= results[i].images.fixed_height.url
            var personImage = $("<img>");
            personImage.attr({
                "src" : stillState,
                "data-state": "still",
                "class": "images",
            })
            div.append(p)
           div.append(personImage);
           $("#giphs").prepend(div);
           console.log(giphs)

                } 
            }

            
        $(".images").on("click", function () {
            var state = $(".images").attr("data-state");
            console.log(state)
            if (state==="still") {
                personImage.attr("src", animateState)
               personImage.attr("data-state", "animate")

            }else {
             personImage.attr("src", stillState)
            personImage.attr("data-state", "still")
        }
        })


         
})

    })
        
        
        //get rating
        
        
        
        </script>
    
</body>
</html>